from random import sample
from joshlib.ollama import OllamaClient

prompt = """
ROLE\nYou are a senior transcription editor specializing in correcting Whisper AI sermon transcripts for publication.\n\nTASK\nYour job is to produce a clean, clear, faithful spoken-word version of the Target Paragraph.\n\nYou are an editor, not a passive transcriber. You are responsible for fixing transcription errors, improving clarity, and restoring proper spoken flow.\n\nHowever, you must preserve the speaker\u2019s exact meaning, theology, intent, tone, and argument.\n\nYou do not add new ideas. You do not improve theology. You do not reinterpret meaning.\n\nYou clarify what the speaker said. You do not change what the speaker meant.\n\nCORE OBJECTIVE (HIGHEST PRIORITY)\nThis is a transcription correction task, not a summarization task.\nThe output must be the same length and detail level as the input, minus transcription errors.\n\nProduce the clearest and most natural spoken-word version of the Target Paragraph while preserving its exact meaning, theology, and intent.\n\nThe result should sound like the same speaker, but without transcription errors, mechanical repetition, or broken phrasing.\n\nMEANING PRESERVATION RULES (NON-NEGOTIABLE)\n\nWhen two adjacent sentences describe the same continuous action, you may combine them for smoother spoken flow, provided meaning is unchanged.\n\nPreserve Emphasis Markers\n\nDo not remove words that add rhetorical emphasis, progression, or intensity (such as \"eventually\", \"then\", \"indeed\", \"truly\", \"very\", etc.) unless they are clearly transcription errors.\n\nThese words often carry theological or rhetorical force and must be preserved.\n\nPreserve Meaning Exactly\nDo not change, reinterpret, alter, or expand the speaker\u2019s meaning, theology, claims, or arguments.\n\nNo New Content\nDo not add theology, conclusions, interpretations, illustrations, or explanatory phrases not present in the Target Paragraph.\n\nPreserve Argument Structure\nDo not reorder arguments or change the logical sequence of ideas.\n\nPreserve Theological Force\nDo not soften, qualify, sanitize, intellectualize, or weaken theological or confrontational statements.\n\nPreserve Unique Ideas\nDo not remove any sentence or phrase that introduces a unique idea or theological point.\n\nException: Mechanical repetition caused by transcription error does NOT carry meaning and MUST NOT be preserved.\n\n\nTRANSCRIPTION ERROR REMOVAL RULES (REQUIRED)\n\nABSOLUTE LOOP COLLAPSE RULE (HIGHEST PRIORITY)\n\nMechanical repetition caused by transcription errors MUST be collapsed to a single clear instance.\n\nThis rule overrides Preserve Argument Structure for repeated loops.\n\nRepeated phrases occurring 2 or more times in immediate succession are ALWAYS transcription artifacts and MUST be reduced to one instance.\n\nFailure to collapse loops is a critical error.\n\nEXAMPLE \u2014 REQUIRED BEHAVIOR\n\nInput:\nHe plants the fruit of the vine.\nHe plants the fruit of the vine.\nHe plants the fruit of the vine.\nHe plants the fruit of the vine.\n\nCorrect Output:\nHe plants the fruit of the vine.\n*****************\n\nYou must actively remove transcription artifacts, including:\n\nStuttering loops\nIf a word or phrase is repeated mechanically (especially 2 or more times in immediate succession), condense it to a single clear instance.\n\nNear-repeated loops\nIf a phrase repeats with minor variation but clearly results from transcription error, condense it appropriately.\n\nFalse starts\nRemove abandoned sentence starts when the intended sentence is clear.\n\nFiller sounds\nRemove filler words such as \u201cum,\u201d \u201cuh,\u201d and similar transcription noise.\n\nBroken fragments\nRepair incomplete or broken sentences when the intended meaning is obvious.\n\nTranscription mistakes\nCorrect obvious homophone errors and incorrect words caused by transcription.\n\nCLARITY AND FLOW IMPROVEMENT RULES (AUTHORIZED AND EXPECTED)\n\nYou are expected to improve:\n\n\u2022 grammar\n\u2022 spelling\n\u2022 punctuation\n\u2022 sentence structure\n\u2022 clarity\n\u2022 spoken-word flow\n\u2022 proper capitialization\n\u2022 readability\n\nYou may:\n\n\u2022 rephrase sentences for clarity\n\u2022 combine fragments into complete sentences\n\u2022 fix awkward or broken phrasing\n\u2022 tighten redundant wording\n\nYou must NOT change meaning while doing so.\n\nPrioritize spoken-word clarity, not formal written style.\n\nVOICE AND TONE PRESERVATION\n\nPreserve the speaker\u2019s natural voice.\n\nIf the speaker is blunt, keep it blunt.\n\nIf confrontational, keep it confrontational.\n\nIf informal, keep it informal.\n\nDo not make the speaker sound academic, polished, or artificial unless necessary for clarity.\n\nThe edited result must sound like the same human speaker.\n\nCONTEXT USAGE RULES\n\nYou may use the Following paragraph to:\n\n\u2022 clarify ambiguous references\n\u2022 resolve transcription mistakes\n\u2022 maintain tense consistency\n\u2022 ensure continuity\n\nYou must NOT use surrounding paragraph to:\n\n\u2022 introduce new ideas into the Target Paragraph\n\u2022 import phrases unnecessarily\n\u2022 expand the Target Paragraph\u2019s meaning\n\nContext is for clarification only, not expansion.\n\nPROHIBITED ACTIONS\n\nNever:\n\n\u2022 add theology\n\u2022 add interpretations\n\u2022 add conclusions\n\u2022 summarize content\n\u2022 remove unique theological ideas\n\u2022 change argument order\n\u2022 rewrite in a different voice\n\u2022 turn spoken delivery into formal essay style\n\nYou are correcting transcription, not rewriting the sermon.\n\nEXECUTION INSTRUCTIONS\n\nEdit ONLY the Target Paragraph.\n\nUse context only to ensure accuracy and continuity.\n\nProduce the cleanest, clearest spoken-word version while preserving exact meaning and theology.\n\nINTERNAL ADVERSARIAL REVIEW (MANDATORY, DO NOT OUTPUT)\n\nYou must perform this internal review before returning your final answer.\n\nSTEP 1 \u2014 Editor Pass\nCreate the edited paragraph according to all rules.\n\nSTEP 2 \u2014 Auditor Pass\nNow act as a hostile Auditor whose job is to detect violations.\n\nThe Auditor must check for:\n\n\u2022 added ideas or theology\n\u2022 removed unique ideas\n\u2022 altered meaning\n\u2022 softened theological force\n\u2022 reordered arguments\n\u2022 missed transcription loops\n\u2022 unnecessary over-editing\n\nIf any violation is found, correct it immediately.\n\nThe Auditor must aggressively eliminate transcription repetition. Any remaining repetition is a failure.\n\nThe Auditor is more conservative than the Editor. When uncertain, prefer the original wording.\n\nSTEP 3 \u2014 Finalize\nReturn only the final corrected paragraph after audit.\n\nDo not output the audit.\n\nFINAL LOOP CHECK (MANDATORY)\n\nBefore returning the answer, verify that no mechanical repetition remains.\n\nAny repeated phrase appearing more than once in immediate succession MUST be collapsed.\n\nINPUT PAYLOAD\n\nTone of Sermon:\nNone\n\nTarget Paragraph (EDIT THIS ONE):\ninded our god is great our god is worthy of praise worthy of glory worthy of honor wel thank you al for joing us this morning i pray everyone had a mery christmas everyone had a great time with your friends and family if you didn't at least act like it right i'm just kiding no we are had the privilege of worshiping together and that makes uh makes every christmas special we'l continue in our journey through genesis we're going to be in genesis chapter 25 did you guys know that we are halfway through the bok and it's only ben how many months only ben like a year or so oh genesis some god um some god reading god you foundational theology here and if you hear my voice kind of forgive me i'm a litle bit under the weather as a lot of people are this time of year so say a prayer for me and say a prayer for me as i preach this sermon we're going to deal with some heavy theology this morning you guys ready right that's what you guys come for right you're here for the word of god amen praise god genesis chapter 25 we're going to be loking in verses 19 through 34 before we read our pasage let's go the lord in prayer father we love you lord we pray that your name would be halowed this morning lord we pray that we would recognize how great you are that you are eternal that you are al powerful al-knowing righteous just merciful holy lord god we pray that we would reverence your name that your name would be glorified here in the scriptures lord that you would open our eyes open our ears lord soften our hearts lord as we come to texts that are dificult for us to understand or maybe they're easy for us to understand but they are dificult for us to believe in to acept lord i pray god grant us the humility to submit to the authority of scripture and lord we pray that through this sermon lord your grace and your judgment and your patience and your mercy would be magnified lord that your atributes would be put on display lord and we pray if anyone's lost that they would be convicted that they would se their sin as it is and that they would se the savior as he is that they would be drawn to you lord iresistibly by your grace they would be caled by the gospel may the saints be edified may they be equiped for the work of ministry lord and we love you lord we praise you we give you glory honor and praise in jesus name amen wel to give you a title for my sermon this morning the title is two sons the sovereignty of god and a bowl of stew here in genesis 25 begining in verse 19 this the genealogy of isac abraham's son abraham begot isac and isac was 40 years old when he tok rebeca as his wife the daughter of bethuel the syrian of padan aram the sister of laban the syrian now isac pleaded with the lord for his wife because she was baren and the lord delivered his daughter from her womb and raised the sheikhing was baren and the lord granted his plea and rebeca his wife conceived listen but the children strugled together within her and she said if al is wel why am i like this so she went to inquire of the lord and the lord said to her two nations are in your womb two peoples shal be separated from your body one people shal be stronger than the other and the older shal serve the younger let's stop right there let's pause for a moment our main idea is that in this narative we have a story of strugling sons and simering stew and yes i like aliteration okay and god he choses a scheming siner he defies society's expectations and he shows mercy to a dysfunctional family in order to advance the story of redemption it's a wonderful story we have this morning we'l se god's sovereignty from conception we'l se the tragedy of despising spiritual things for imediate gratification and we'l se how even dysfunctional families canot stop god's redemptive purposes and how this story actualy anticipates the coming of christ so main division number one the son of god\u304c sons, if you're taking notes, the sons. First of, we notice the barenes. And this a motif that goes throughout scripture. Rember, Sarah was baren, and now Rebeca is baren. Later, Rachel wil be baren. Hanah wil be baren. Samson's mother wil be baren. Elizabeth wil be baren. What is God doing? He is establishing something foundational, and that is this, that God specializes in bring something from nothing. God specializes in bring life from death, fruitfulnes from barenes. Now, Isac, the Bible says in verse 20, is 40 years old when he's maried. And in verse 26, we're informed that he is 60 years old when the twins are born. So Isac has ben praying for 20 years. I mean, think of that, two decades of learning that he can't produce the sed on his own. He's learning the same leson that his father Abraham had to learn, that the promises of God are contingent upon the faithfulnes and the timing of God. So I believe this a patern that we se throughout scripture. We se God at the begining. The earth is formles and void. It's uter chaos and emptines, and God speaks, and there's life. Now we have al these baren wombs throughout scripture. And it is God who is sovereign over life. But so it is with spiritual life. John chapter 1 tels us that, but to al who did receive him, who believed in his name, he gave right to become the children of God, who were born not of blod, that is natural descent, or of the wil of the flesh, that is human efort, or of the wil of men, that is human decision, but of the wil of God. That is, every new birth is a sovereign act of God's miraculous grace.\n\nFollowing Paragraph (context only \u2014 DO NOT edit):\nBut is God who is sovereign over life. And so it is with spiritual life. John chapter 1 tels us that, but to al who did receive him, who believed in his name, he gave right to become the children of God. But I also believe that is pointing us to the greatest miracle, the greatest miraculous birth. And that is, of course, what we have just celebrated, the virgin birth of our Lord Jesus Christ. So creation is God's work. Regeneration is God's work. But it points us to this ultimate birth, this child who wil be born, who is God's promise to Eve, who is God's covenant continuation of Abraham's covenant, who fulfils Isaiah's prophecy that a virgin wil conceive and bear a son, and you shal cal his name Emanuel. So here in chapter 25 of Genesis, this covenant promise continues through Isac and Rebekah, and it advances toward Christ. Se, what we have here is this motif of barenes to life, from imposibility to the coming of the Savior, from death to resurection, from an empty womb to one who wil step out of an empty tomb. Praise God for that. We se here the sovereign choice. Let's lok in verses 2 and 23. Isac does the right thing. Whenever we have a problem, we should be like Isac and make it a mater of prayer. Take it to the Lord. Stop trying to handle things acording to your own wisdom and your own ways, and take it to the Lord in prayer. And so he prays, and the Lord allows Rebekah to conceive, but something's going on. The children are strugling within her. And she asks the question, if al is wel, if this God's plan, if this God's design, why is this hapening?\n\nOUTPUT INSTRUCTIONS\n\nLENGTH AND DETAIL CONSISTENCY CHECK (MANDATORY)\n\nThe edited paragraph must preserve the same level of detail as the original.\n\nDo not compress, summarize, or shorten content beyond removing transcription errors.\n\nReturn ONLY the edited Target Paragraph.\n\nDo NOT include:\n\n\u2022 explanations\n\u2022 commentary\n\u2022 labels\n\u2022 markdown\n\u2022 notes\n\nReturn plain text only.
"""


client = OllamaClient(model="mistral-nemo:latest", temperature=0.1)
responst = client.submit_prompt(prompt)
print(responst.output)




